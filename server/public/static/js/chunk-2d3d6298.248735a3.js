(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d3d6298"],{"185b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-add-container"},[a("el-row",[a("el-col",{attrs:{xs:24,sm:18,md:12}},[a("coupon-form",{ref:"form",on:{submit:t.submit}})],1)],1)],1)},o=[],n=(a("d3b7"),a("e6cf"),a("a79d"),a("bc3a")),i=a.n(n),s=a("732e"),l={name:"TaskAdd",components:{CouponForm:s["a"]},methods:{submit:function(t){var e=this;i.a.post("/api/task/save",t).then((function(t){var a=t.data.code;0===a?e.$message.success("提交成功！"):e.$message.error("提交失败！")})).finally((function(){e.$refs.form.cancel()}))}}},c=l,f=(a("7fa8"),a("2877")),u=Object(f["a"])(c,r,o,!1,null,"c0f1ef6e",null);e["default"]=u.exports},"3d7e":function(t,e,a){},"498a":function(t,e,a){"use strict";var r=a("23e7"),o=a("58a8").trim,n=a("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return o(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),o=a("5899"),n="["+o+"]",i=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),l=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(t,e,a){var r=a("861d"),o=a("d2bb");t.exports=function(t,e,a){var n,i;return o&&"function"==typeof(n=e.constructor)&&n!==a&&r(i=n.prototype)&&i!==a.prototype&&o(t,i),t}},"732e":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,"label-width":"80px","status-icon":""}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:0===t.formData.type?"里程/km":"次数",prop:"aim"}},[a("el-input",{model:{value:t.formData.aim,callback:function(e){t.$set(t.formData,"aim",e)},expression:"formData.aim"}})],1),a("el-form-item",{attrs:{label:"类型",required:""}},[a("el-radio",{attrs:{label:0},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("骑行")]),a("el-radio",{attrs:{label:1},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("公交")]),a("el-radio",{attrs:{label:2},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("地铁")]),a("el-radio",{attrs:{label:3},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[t._v("高铁")])],1),a("el-form-item",{attrs:{label:"任务要求",prop:"description"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100","show-word-limit":"",resize:"none",rows:"3"},on:{blur:function(e){return t.trim("description")}},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:"成长值",prop:"growth"}},[a("el-input",{model:{value:t.formData.growth,callback:function(e){t.$set(t.formData,"growth",e)},expression:"formData.growth"}})],1),a("el-form-item",{attrs:{label:"碳积分",prop:"integral"}},[a("el-input",{model:{value:t.formData.integral,callback:function(e){t.$set(t.formData,"integral",e)},expression:"formData.integral"}})],1),a("el-form-item",{attrs:{label:"优惠卷",prop:"coupons"}},[a("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:t.formData.coupons,callback:function(e){t.$set(t.formData,"coupons",e)},expression:"formData.coupons"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submit}},[t._v("提交")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)},o=[],n=(a("a4d3"),a("e01a"),a("d81d"),a("a9e3"),a("bc3a")),i=a.n(n),s=a("e49c"),l={name:"TaskForm",mixins:[s["a"]],props:{id:{type:Number,default:-1},title:{type:String,default:"今日骑行"},aim:{type:Number,default:3},type:{type:Number,default:0},description:{type:String,default:"当天骑行里程达到三公里即可领取奖励！"},integral:{type:Number,default:10},growth:{type:Number,default:10},coupons:{type:Array,default:function(){return[]}}},data:function(){return{formData:{description:"",title:"",aim:"",type:0,integral:"",growth:"",coupons:[]},rules:{aim:[{required:!0,message:"不能为空"},{pattern:/^[1-9][0-9]{0,4}$/,message:"不符合要求"}],integral:[{required:!0,message:"不能为空"},{pattern:/^[1-9][0-9]{0,4}$/,message:"不符合要求"}],growth:[{required:!0,message:"不能为空"},{pattern:/^[1-9][0-9]{0,4}$/,message:"不符合要求"}],title:[{required:!0,message:"不能为空"}],description:[{required:!0,message:"不能为空"}]},loading:!1,options:[]}},watch:{id:function(){this.init()},coupons:function(t){this.formData.coupons=t}},methods:{init:function(){this.formData.aim=this.aim,this.formData.title=this.title,this.formData.description=this.description,this.formData.integral=this.integral,this.formData.growth=this.growth,this.formData.type=this.type,this.formData.coupons=this.coupons},cancel:function(){this.loading=!1},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&!t.loading&&(t.loading=!0,t.$emit("submit",{title:t.formData.title,aim:parseInt(t.formData.aim,10),type:t.formData.type,description:t.formData.description,integral:parseInt(t.formData.integral,10),growth:parseInt(t.formData.growth,10),coupons:t.formData.coupons}))}))},reset:function(){this.init(),-1===this.id&&this.$refs.form.resetFields()}},mounted:function(){var t=this;this.init(),i.a.get("/api/coupon/all").then((function(e){var a=e.data,r=a.code,o=a.data;0!==r?t.$message.error("获取数据失败！"):t.options=o.map((function(t){return{label:"".concat(t.integral,"积分优惠卷"),value:t.id}}))}))}},c=l,f=a("2877"),u=Object(f["a"])(c,r,o,!1,null,null,null);e["a"]=u.exports},"7fa8":function(t,e,a){"use strict";var r=a("3d7e"),o=a.n(r);o.a},a79d:function(t,e,a){"use strict";var r=a("23e7"),o=a("c430"),n=a("fea9"),i=a("d039"),s=a("d066"),l=a("4840"),c=a("cdf9"),f=a("6eeb"),u=!!n&&i((function(){n.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(t){var e=l(this,s("Promise")),a="function"==typeof t;return this.then(a?function(a){return c(e,t()).then((function(){return a}))}:t,a?function(a){return c(e,t()).then((function(){throw a}))}:t)}}),o||"function"!=typeof n||n.prototype["finally"]||f(n.prototype,"finally",s("Promise").prototype["finally"])},a9e3:function(t,e,a){"use strict";var r=a("83ab"),o=a("da84"),n=a("94ca"),i=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),f=a("c04e"),u=a("d039"),m=a("7c73"),p=a("241c").f,d=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,b="Number",y=o[b],D=y.prototype,v=l(m(D))==b,w=function(t){var e,a,r,o,n,i,s,l,c=f(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(n=c.slice(2),i=n.length,s=0;s<i;s++)if(l=n.charCodeAt(s),l<48||l>o)return NaN;return parseInt(n,r)}return+c};if(n(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,N=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof N&&(v?u((function(){D.valueOf.call(a)})):l(a)!=b)?c(new y(w(e)),a,N):w(e)},k=r?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),$=0;k.length>$;$++)s(y,x=k[$])&&!s(N,x)&&h(N,x,d(y,x));N.prototype=D,D.constructor=N,i(o,b,N)}},c8d2:function(t,e,a){var r=a("d039"),o=a("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!o[t]()||n[t]()!=n||o[t].name!==t}))}},d81d:function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").map,n=a("1dde"),i=a("ae40"),s=n("map"),l=i("map");r({target:"Array",proto:!0,forced:!s||!l},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e49c:function(t,e,a){"use strict";a("498a");e["a"]={methods:{trim:function(t){this.formData[t]=this.formData[t].trim()}}}}}]);